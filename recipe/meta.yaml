{% set version = '2.3-2' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-evd
  version: {{ version|replace("-", "_") }}

source:
  fn: evd_{{ version }}.tar.gz
  url:
    - https://cran.r-project.org/src/contrib/evd_{{ version }}.tar.gz
    - https://cran.r-project.org/src/contrib/Archive/evd/evd_{{ version }}.tar.gz
  sha256: be3d52837a4eb145a7ff02dc405893d82dd627ded028e34160035dc117bd0159

build:
  merge_build_host: True  # [win]
  number: 2
  skip: true  # [win32]

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - posix                # [win]
    - {{ compiler('c') }}        # [unix]
    - {{ compiler('m2w64_c') }}  # [win]
  host:
    - r-base

  run:
    - r-base

test:
  commands:
    - $R -e "library('evd')"  # [not win]
    - "\"%R%\" -e \"library('evd')\""  # [win]
    - conda inspect linkages -p $PREFIX r-evd  # [not win]
    - conda inspect objects -p $PREFIX r-evd  # [osx]

about:
  home: https://CRAN.R-project.org/package=evd
  license: GPL-3
  summary: Extends simulation, distribution, quantile and density functions to univariate and
    multivariate parametric extreme value distributions, and provides fitting functions
    which calculate maximum likelihood estimates for univariate and bivariate maxima
    models, and for univariate and bivariate threshold models.
  license_family: GPL3

extra:
  recipe-maintainers:
    - dpryan79
    - daf
